import React from 'react';
import { useTranslation } from 'react-i18next';
import { useLanguage } from '../../contexts/LanguageContext';

// --- Custom SVG Icon Components ---

const DnaIcon = () => (
  <svg className="w-4 h-4 sm:w-5 sm:h-5 lg:w-7 lg:h-7" viewBox="0 0 14 22" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M13.7501 18.1716V20.7497C13.7501 20.9486 13.6711 21.1394 13.5304 21.28C13.3898 21.4207 13.199 21.4997 13.0001 21.4997C12.8012 21.4997 12.6104 21.4207 12.4698 21.28C12.3291 21.1394 12.2501 20.9486 12.2501 20.7497V18.1716C12.2538 17.0564 11.945 15.9625 11.3588 15.0139C10.7725 14.0653 9.93225 13.2999 8.93322 12.8044L4.39572 10.5366C3.147 9.91724 2.09676 8.96047 1.36403 7.77472C0.631312 6.58898 0.245419 5.22168 0.250097 3.82782V1.24969C0.250097 1.05078 0.329115 0.860017 0.469767 0.719365C0.610419 0.578712 0.801185 0.499695 1.0001 0.499695C1.19901 0.499695 1.38977 0.578712 1.53043 0.719365C1.67108 0.860017 1.7501 1.05078 1.7501 1.24969V3.82782C1.74642 4.94297 2.0552 6.03685 2.64144 6.98547C3.22768 7.93409 4.06794 8.69953 5.06697 9.19501L9.60447 11.4628C10.8532 12.0822 11.9034 13.0389 12.6362 14.2247C13.3689 15.4104 13.7548 16.7777 13.7501 18.1716ZM10.2982 16.9997H2.86666C2.76384 16.9999 2.66208 16.979 2.56769 16.9382C2.4733 16.8975 2.38829 16.8378 2.31796 16.7628C2.24762 16.6878 2.19346 16.5991 2.15883 16.5023C2.1242 16.4055 2.10985 16.3026 2.11666 16.2C2.13346 16.0069 2.22277 15.8273 2.36661 15.6974C2.51045 15.5675 2.69816 15.4968 2.89197 15.4997H9.03447C9.10942 15.4996 9.18262 15.4771 9.24463 15.435C9.30664 15.3929 9.35461 15.3332 9.38236 15.2635C9.4101 15.1939 9.41635 15.1176 9.4003 15.0444C9.38424 14.9712 9.34662 14.9044 9.29228 14.8528C8.98286 14.5709 8.6358 14.3333 8.26103 14.1469L3.8876 11.9588C3.82721 11.9286 3.7598 11.9153 3.69248 11.9202C3.62516 11.9252 3.56042 11.9482 3.5051 11.9869C2.4984 12.6732 1.67529 13.5959 1.10784 14.6741C0.540378 15.7523 0.245872 16.9532 0.250097 18.1716V20.7244C0.247013 20.9183 0.317574 21.1061 0.447544 21.25C0.577515 21.3939 0.757222 21.4831 0.95041 21.4997C1.053 21.5065 1.15589 21.4922 1.2527 21.4575C1.34951 21.4229 1.43817 21.3687 1.51316 21.2984C1.58816 21.2281 1.64789 21.1431 1.68865 21.0487C1.72941 20.9543 1.75032 20.8525 1.7501 20.7497V19.2497H10.3751C10.4746 19.2497 10.5699 19.2102 10.6403 19.1399C10.7106 19.0695 10.7501 18.9742 10.7501 18.8747V18.1716C10.7501 17.8783 10.7218 17.5857 10.6657 17.2978C10.6481 17.2135 10.6019 17.1378 10.5349 17.0835C10.468 17.0292 10.3844 16.9996 10.2982 16.9997ZM12.9504 0.499695C12.7572 0.516283 12.5775 0.605525 12.4475 0.749415C12.3176 0.893304 12.247 1.08113 12.2501 1.27501V2.74969H3.6251C3.52564 2.74969 3.43026 2.7892 3.35993 2.85953C3.28961 2.92986 3.2501 3.02524 3.2501 3.12469V3.82782C3.25013 4.1211 3.27838 4.4137 3.33447 4.70157C3.35214 4.78593 3.39833 4.86162 3.46526 4.91592C3.53219 4.97022 3.61579 4.9998 3.70197 4.99969H11.1082C11.3017 4.99731 11.489 5.06816 11.6324 5.19804C11.7758 5.32792 11.8649 5.50723 11.8817 5.70001C11.8885 5.8026 11.8741 5.90549 11.8395 6.0023C11.8049 6.09911 11.7507 6.18777 11.6804 6.26276C11.61 6.33775 11.525 6.39749 11.4306 6.43824C11.3362 6.479 11.2345 6.49992 11.1317 6.49969H4.96572C4.89078 6.49979 4.81757 6.52234 4.75557 6.56443C4.69356 6.60653 4.64559 6.66624 4.61784 6.73586C4.59009 6.80548 4.58384 6.88182 4.5999 6.95503C4.61595 7.02823 4.65357 7.09495 4.70791 7.14657C5.01733 7.42847 5.3644 7.66605 5.73916 7.85251L10.1145 10.0406C10.1749 10.0708 10.2423 10.0841 10.3096 10.0792C10.3769 10.0742 10.4417 10.0512 10.497 10.0125C11.5033 9.32594 12.3261 8.40319 12.8932 7.325C13.4603 6.24681 13.7545 5.04606 13.7501 3.82782V1.24969C13.7503 1.14688 13.7294 1.04512 13.6886 0.950723C13.6479 0.856332 13.5882 0.771329 13.5132 0.700994C13.4382 0.630659 13.3495 0.576495 13.2527 0.541866C13.1559 0.507237 13.053 0.492883 12.9504 0.499695Z" fill="white"/>
  </svg>
);

const MicroscopeIcon = () => (
  <svg className="w-4 h-4 sm:w-5 sm:h-5 lg:w-7 lg:h-7" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M19.75 19.25C19.75 19.4489 19.671 19.6397 19.5303 19.7803C19.3897 19.921 19.1989 20 19 20H1C0.801088 20 0.610322 19.921 0.46967 19.7803C0.329018 19.6397 0.25 19.4489 0.25 19.25C0.25 19.0511 0.329018 18.8603 0.46967 18.7197C0.610322 18.579 0.801088 18.5 1 18.5H14.9922C16.0276 17.6628 16.7922 16.5382 17.19 15.2675C17.5877 13.9968 17.6007 12.6368 17.2275 11.3587C16.8542 10.0807 16.1112 8.94151 15.0921 8.08464C14.073 7.22776 12.8232 6.69143 11.5 6.54313V11.75C11.5 12.1478 11.342 12.5294 11.0607 12.8107C10.7794 13.092 10.3978 13.25 10 13.25H5.5C5.10218 13.25 4.72064 13.092 4.43934 12.8107C4.15804 12.5294 4 12.1478 4 11.75V2C4 1.60218 4.15804 1.22064 4.43934 0.93934C4.72064 0.658035 5.10218 0.5 5.5 0.5H10C10.3978 0.5 10.7794 0.658035 11.0607 0.93934C11.342 1.22064 11.5 1.60218 11.5 2V5.03469C12.9941 5.17185 14.4226 5.71365 15.6319 6.60184C16.8411 7.49003 17.7855 8.69101 18.3633 10.0757C18.9412 11.4603 19.1307 12.9763 18.9115 14.4606C18.6923 15.9449 18.0728 17.3414 17.1194 18.5H19C19.1989 18.5 19.3897 18.579 19.5303 18.7197C19.671 18.8603 19.75 19.0511 19.75 19.25ZM10.75 16.25C10.9489 16.25 11.1397 16.171 11.2803 16.0303C11.421 15.8897 11.5 15.6989 11.5 15.5C11.5 15.3011 11.421 15.1103 11.2803 14.9697C11.1397 14.829 10.9489 14.75 10.75 14.75H4.75C4.55109 14.75 4.36032 14.829 4.21967 14.9697C4.07902 15.1103 4 15.3011 4 15.5C4 15.6989 4.07902 15.8897 4.21967 16.0303C4.36032 16.171 4.55109 16.25 4.75 16.25H10.75Z" fill="white"/>
  </svg>
);

const TestTubeIcon = () => (
  <svg className="w-4 h-4 sm:w-5 sm:h-5 lg:w-7 lg:h-7" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.2799 6.27465C21.2102 6.34438 21.1275 6.3997 21.0364 6.43744C20.9454 6.47519 20.8478 6.49461 20.7492 6.49461C20.6507 6.49461 20.5531 6.47519 20.462 6.43744C20.371 6.3997 20.2883 6.34438 20.2186 6.27465L18.4992 4.55434L15.8086 7.24965L19.0289 10.47C19.1697 10.6107 19.2487 10.8016 19.2487 11.0006C19.2487 11.1996 19.1697 11.3905 19.0289 11.5312C18.8882 11.6719 18.6973 11.751 18.4983 11.751C18.2993 11.751 18.1084 11.6719 17.9677 11.5312L17.3742 10.9312L9.49924 18.8062C9.35988 18.9466 9.19412 19.0581 9.01151 19.1342C8.82889 19.2103 8.63302 19.2496 8.43518 19.2496H3.80486L1.77424 21.2803C1.70131 21.3533 1.6141 21.4105 1.51805 21.4483C1.42201 21.486 1.3192 21.5036 1.21607 21.4998C1.11294 21.496 1.01169 21.471 0.918677 21.4263C0.82566 21.3816 0.74287 21.3181 0.675489 21.24C0.552789 21.0909 0.490568 20.9012 0.50116 20.7085C0.511753 20.5158 0.594386 20.334 0.732676 20.1993L2.74361 18.1875V13.5571C2.74454 13.1604 2.90264 12.7801 3.1833 12.4996L4.60643 11.0765C4.64125 11.0417 4.68261 11.014 4.72814 10.9951C4.77366 10.9763 4.82246 10.9665 4.87174 10.9665C4.92102 10.9665 4.96982 10.9763 5.01534 10.9951C5.06087 11.014 5.10222 11.0417 5.13705 11.0765L7.83986 13.7775C7.90955 13.8471 7.99227 13.9024 8.08332 13.9401C8.17436 13.9778 8.27194 13.9973 8.37049 13.9973C8.46904 13.9973 8.56662 13.9778 8.65766 13.9401C8.74871 13.9024 8.83143 13.8471 8.90111 13.7775C8.9708 13.7078 9.02607 13.6251 9.06378 13.534C9.1015 13.443 9.12091 13.3454 9.12091 13.2468C9.12091 13.1483 9.1015 13.0507 9.06378 12.9597C9.02607 12.8686 8.9708 12.7859 8.90111 12.7162L6.19736 10.0125C6.1625 9.97763 6.13484 9.93627 6.11597 9.89075C6.09709 9.84523 6.08738 9.79643 6.08738 9.74715C6.08738 9.69787 6.09709 9.64907 6.11597 9.60355C6.13484 9.55802 6.1625 9.51666 6.19736 9.48184L7.22861 8.45058C7.26344 8.41572 7.3048 8.38806 7.35032 8.36919C7.39585 8.35032 7.44465 8.3406 7.49393 8.3406C7.54321 8.3406 7.59201 8.35032 7.63753 8.36919C7.68305 8.38806 7.72441 8.41572 7.75924 8.45058L10.463 11.1543C10.5327 11.224 10.6154 11.2793 10.7064 11.317C10.7975 11.3547 10.8951 11.3741 10.9936 11.3741C11.0922 11.3741 11.1897 11.3547 11.2808 11.317C11.3718 11.2793 11.4546 11.224 11.5242 11.1543C11.5939 11.0847 11.6492 11.0019 11.6869 10.9109C11.7246 10.8198 11.744 10.7223 11.744 10.6237C11.744 10.5252 11.7246 10.4276 11.6869 10.3365C11.6492 10.2455 11.5939 10.1628 11.5242 10.0931L8.8233 7.38652C8.78844 7.3517 8.76078 7.31034 8.7419 7.26481C8.72303 7.21929 8.71332 7.17049 8.71332 7.12121C8.71332 7.07193 8.72303 7.02313 8.7419 6.97761C8.76078 6.93208 8.78844 6.89073 8.8233 6.8559L11.0611 4.61902L10.4658 4.02371C10.3947 3.95266 10.3387 3.86806 10.3009 3.77493C10.2632 3.68179 10.2446 3.58202 10.2461 3.48154C10.2477 3.38106 10.2695 3.28193 10.3101 3.19002C10.3507 3.09811 10.4094 3.01531 10.4827 2.94652C10.631 2.81423 10.8247 2.74436 11.0234 2.75153C11.222 2.75869 11.4102 2.84232 11.5486 2.98496L14.7492 6.18371L17.4389 3.49308L15.7177 1.77277C15.6465 1.70179 15.5904 1.61724 15.5526 1.52413C15.5148 1.43103 15.4961 1.33128 15.4975 1.2308C15.499 1.13033 15.5207 1.03117 15.5612 0.93923C15.6018 0.847288 15.6604 0.764432 15.7336 0.695584C15.8821 0.563229 16.076 0.493339 16.2748 0.500501C16.4736 0.507663 16.6619 0.591324 16.8005 0.734022L21.2799 5.2134C21.3496 5.28305 21.4049 5.36577 21.4427 5.45682C21.4804 5.54787 21.4998 5.64546 21.4998 5.74402C21.4998 5.84258 21.4804 5.94018 21.4427 6.03123C21.4049 6.12228 21.3496 6.20499 21.2799 6.27465Z" fill="white"/>
  </svg>
);

const WrenchIcon = () => (
  <svg className="w-4 h-4 sm:w-5 sm:h-5 lg:w-7 lg:h-7" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.281 6.09496L14.656 0.469965C14.5863 0.400233 14.5036 0.344913 14.4126 0.30717C14.3215 0.269427 14.2239 0.25 14.1254 0.25C14.0268 0.25 13.9292 0.269427 13.8382 0.30717C13.7471 0.344913 13.6644 0.400233 13.5947 0.469965L1.47944 12.5853C0.692242 13.3725 0.25 14.4401 0.25 15.5534C0.25 16.6667 0.692242 17.7343 1.47944 18.5215C2.26663 19.3087 3.3343 19.751 4.44756 19.751C5.56083 19.751 6.62849 19.3087 7.41569 18.5215L17.9054 8.03184L19.9876 7.33809C20.1089 7.29772 20.218 7.22699 20.3043 7.1326C20.3906 7.03822 20.4514 6.92333 20.4808 6.79885C20.5102 6.67437 20.5073 6.54443 20.4723 6.4214C20.4373 6.29836 20.3715 6.18631 20.281 6.0959V6.09496ZM17.2632 6.66403C17.1527 6.70074 17.0522 6.76269 16.9697 6.84497L13.2601 10.5547C12.466 10.8265 11.221 10.9297 9.59725 10.0859C8.6035 9.56653 7.70537 9.3359 6.91975 9.26747L14.1254 2.0609L18.3619 6.29747L17.2632 6.66403Z" fill="white"/>
  </svg>
);


const RatingBadge = ({ rating = 4.6, subtitle = "Certified & Reliable", subtitleKey, className = '' }) => {
  const { t } = useTranslation();
  const { isRTL } = useLanguage();

  // Use translation if subtitleKey is provided, otherwise use subtitle prop
  const displaySubtitle = subtitleKey ? t(subtitleKey) : subtitle;

  return (
    <div className={`flex flex-col ${className}`}>
      {/* Colorful circles with icons */}
      <div className="flex justify-start mb-3">
        <div className={`w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-emerald-500 rounded-full flex items-center justify-center shadow-sm border-2 sm:border-3 lg:border-4 border-white ${isRTL ? 'z-40' : 'z-10'}`}>
          <DnaIcon />
        </div>
        <div className={`w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-cyan-500 rounded-full flex items-center justify-center shadow-sm border-2 sm:border-3 lg:border-4 border-white ${isRTL ? 'z-30 -mr-2 sm:-mr-2.5 lg:-mr-3' : 'z-20 -ml-2 sm:-ml-2.5 lg:-ml-3'}`}>
          <MicroscopeIcon />
        </div>
        <div className={`w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-yellow-400 rounded-full flex items-center justify-center shadow-sm border-2 sm:border-3 lg:border-4 border-white ${isRTL ? 'z-20 -mr-2 sm:-mr-2.5 lg:-mr-3' : 'z-30 -ml-2 sm:-ml-2.5 lg:-ml-3'}`}>
          <TestTubeIcon />
        </div>
        <div className={`w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-purple-500 rounded-full flex items-center justify-center shadow-sm border-2 sm:border-3 lg:border-4 border-white ${isRTL ? 'z-10 -mr-2 sm:-mr-2.5 lg:-mr-3' : 'z-40 -ml-2 sm:-ml-2.5 lg:-ml-3'}`}>
          <WrenchIcon />
        </div>
      </div>

      {/* Rating with star - single line aligned to start */}
      <div className={`flex items-center gap-1 ${isRTL ? 'flex-row-reverse' : ''}`}>
        <span className="text-yellow-400 text-sm sm:text-base leading-none">★</span>
        <span className="text-sm sm:text-base font-bold text-gray-900 leading-none">{rating}</span>
        <span className={`text-xs sm:text-base text-gray-500 leading-none ${isRTL ? 'mr-1' : 'ml-1'}`}>{displaySubtitle}</span>
      </div>
    </div>
  );
};

export default RatingBadge;
